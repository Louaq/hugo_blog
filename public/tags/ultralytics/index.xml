<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Ultralytics on Louaq lab</title>
    <link>https://louaq.github.io/hugo_blog/tags/ultralytics/</link>
    <description>Recent content in Ultralytics on Louaq lab</description>
    <generator>Hugo</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sun, 21 Apr 2024 12:00:00 +0000</lastBuildDate>
    <atom:link href="https://louaq.github.io/hugo_blog/tags/ultralytics/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>报错</title>
      <link>https://louaq.github.io/hugo_blog/post/article_14/</link>
      <pubDate>Sun, 21 Apr 2024 12:00:00 +0000</pubDate>
      <guid>https://louaq.github.io/hugo_blog/post/article_14/</guid>
      <description>&lt;h2 id=&#34;一本文介绍&#34;&gt;&#xD;&#xA;&lt;a class=&#34;header-anchor&#34; href=&#34;#%e4%b8%80%e6%9c%ac%e6%96%87%e4%bb%8b%e7%bb%8d&#34;&gt;&lt;/a&gt;&#xD;&#xA;一、本文介绍&#xD;&#xA;&lt;/h2&gt;&lt;p&gt;本文为专栏内读者和我个人在训练&lt;strong&gt;YOLOv8时遇到的各种错误解决方案&lt;/strong&gt;，你遇到的问题本文基本上都能够解决。&lt;/p&gt;&#xA;&lt;h2 id=&#34;二-报错问题&#34;&gt;&#xD;&#xA;&lt;a class=&#34;header-anchor&#34; href=&#34;#%e4%ba%8c-%e6%8a%a5%e9%94%99%e9%97%ae%e9%a2%98&#34;&gt;&lt;/a&gt;&#xD;&#xA;二、 报错问题 &#xD;&#xA;&lt;/h2&gt;&lt;p&gt;# 以下为两个重要库的版本，大家可以对应下载，使用教程我会更新，时间还没来得及大家可以先看视频使用。&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;项目环境：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;python == 3.9.7&lt;/p&gt;&#xA;&lt;p&gt;pytorch == 1.12.1&lt;/p&gt;&#xA;&lt;p&gt;timm == 0.9.12&lt;/p&gt;&#xA;&lt;p&gt;mmcv-full == 1.6.2&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;1训练过程中loss出现nan值&#34;&gt;&#xD;&#xA;&lt;a class=&#34;header-anchor&#34; href=&#34;#1%e8%ae%ad%e7%bb%83%e8%bf%87%e7%a8%8b%e4%b8%adloss%e5%87%ba%e7%8e%b0nan%e5%80%bc&#34;&gt;&lt;/a&gt;&#xD;&#xA;(1)训练过程中loss出现Nan值.&#xD;&#xA;&lt;/h3&gt;&lt;p&gt;可以尝试关闭AMP混合精度训练，如何关闭amp呢找到如下文件&amp;rsquo;ultralytics/cfg/default.yaml&amp;rsquo;，其中有一个参数是&lt;/p&gt;&#xA;\[True, False\]&lt;p&gt;, True runs AMP check&lt;/p&gt;&#xA;&lt;p&gt;我们将其设置为False即可，默认时为True。&lt;/p&gt;&#xA;&lt;p&gt;.&lt;/p&gt;&#xA;&lt;h3 id=&#34;2多卡训练问题修改模型以后不能支持多卡训练可以尝试下面的两行命令行操作两个是不同的操作是代表不同的版本现尝试第一个不行用第二个&#34;&gt;&#xD;&#xA;&lt;a class=&#34;header-anchor&#34; href=&#34;#2%e5%a4%9a%e5%8d%a1%e8%ae%ad%e7%bb%83%e9%97%ae%e9%a2%98%e4%bf%ae%e6%94%b9%e6%a8%a1%e5%9e%8b%e4%bb%a5%e5%90%8e%e4%b8%8d%e8%83%bd%e6%94%af%e6%8c%81%e5%a4%9a%e5%8d%a1%e8%ae%ad%e7%bb%83%e5%8f%af%e4%bb%a5%e5%b0%9d%e8%af%95%e4%b8%8b%e9%9d%a2%e7%9a%84%e4%b8%a4%e8%a1%8c%e5%91%bd%e4%bb%a4%e8%a1%8c%e6%93%8d%e4%bd%9c%e4%b8%a4%e4%b8%aa%e6%98%af%e4%b8%8d%e5%90%8c%e7%9a%84%e6%93%8d%e4%bd%9c%e6%98%af%e4%bb%a3%e8%a1%a8%e4%b8%8d%e5%90%8c%e7%9a%84%e7%89%88%e6%9c%ac%e7%8e%b0%e5%b0%9d%e8%af%95%e7%ac%ac%e4%b8%80%e4%b8%aa%e4%b8%8d%e8%a1%8c%e7%94%a8%e7%ac%ac%e4%ba%8c%e4%b8%aa&#34;&gt;&lt;/a&gt;&#xD;&#xA;(2)多卡训练问题,修改模型以后不能支持多卡训练可以尝试下面的两行命令行操作，两个是不同的操作，是代表不同的版本现尝试第一个不行用第二个&#xD;&#xA;&lt;/h3&gt;&lt;p&gt;    python -m torch.distributed.run &amp;ndash;nproc_per_node 2 train.py&lt;/p&gt;&#xA;&lt;p&gt;    python -m torch.distributed.launch &amp;ndash;nproc_per_node 2 train.py&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;3-针对运行过程中的一些报错解决&#34;&gt;&#xD;&#xA;&lt;a class=&#34;header-anchor&#34; href=&#34;#3-%e9%92%88%e5%af%b9%e8%bf%90%e8%a1%8c%e8%bf%87%e7%a8%8b%e4%b8%ad%e7%9a%84%e4%b8%80%e4%ba%9b%e6%8a%a5%e9%94%99%e8%a7%a3%e5%86%b3&#34;&gt;&lt;/a&gt;&#xD;&#xA;(3) 针对运行过程中的一些报错解决&#xD;&#xA;&lt;/h3&gt;&lt;p&gt;    &lt;strong&gt;1.如果训练的过程中验证报错了(主要是一些形状不匹配的错误这是因为验证集的一些特殊图片导致)&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;就是有这种训练第一个epochs完成后开始验证的时候报错，下面的方法基本百分之九十都能够解决。&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://yangyang666.oss-cn-chengdu.aliyuncs.com/typoraImages/e61c95278a244aebbe4ac67f07f90466.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;    找到ultralytics/models/yolo/detect/train.py的DetectionTrainer class中的build_dataset函数中的rect=mode == &amp;lsquo;val&amp;rsquo;改为rect=False&lt;/p&gt;&#xA;&lt;p&gt;    &lt;strong&gt;2.推理的时候运行detect.py文件报了形状不匹配的错误&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;    找到ultralytics/engine/predictor.py找到函数def pre_transform(self, im),在LetterBox中的auto改为False&lt;/p&gt;&#xA;&lt;p&gt;    &lt;strong&gt;3.训练的过程中报错类型不匹配的问题&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;    找到&amp;rsquo;ultralytics/engine/validator.py&amp;rsquo;文件找到 &amp;lsquo;class BaseValidator:&amp;rsquo; 然后在其&amp;rsquo;__call__&amp;lsquo;中&lt;/p&gt;&#xA;&lt;p&gt;    self.args.half = self.device.type != &amp;lsquo;cpu&amp;rsquo;  # force FP16 val during training的一行代码下面加上self.args.half = False&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
